# Конфігурація поточного дослідження

> **Версія:** 1.0 | **Створено:** 31.01.2026

**Див. також:** [00_WORK_HISTORY.md](./00_WORK_HISTORY.md) — історія робіт по проекту

---

## 1. МУЛЬТИ-РИНКОВИЙ ПІДХІД

Цей проект аналізує **множину локальних ринків** (50+ аптек) для отримання стабільних крос-ринкових коефіцієнтів субституції.

| Параметр | Значення |
|----------|----------|
| Кількість ринків | 50+ |
| Формат вхідних файлів | `Rd2_{CLIENT_ID}.csv` |
| CLIENT_ID | ID цільової аптеки (з назви файлу) |

---

## 2. ВХІДНІ ДАНІ

### Структура файлів

```
data/raw/
├── Rd2_125467.csv
├── Rd2_125468.csv
├── Rd2_125469.csv
└── ... (50+ файлів)
```

### Ключові колонки

| Колонка | Опис |
|---------|------|
| `CLIENT_ID` | ID цільової аптеки (= з назви файлу) |
| `ORG_ID` | ID аптеки-продавця |
| `DRUGS_ID` | Morion ID препарату |
| `INN_ID` | ID групи діючої речовини |
| `Q` | Кількість упаковок |

---

## 3. ПЕРІОД ДАНИХ

| Параметр | Значення |
|----------|----------|
| Початок | визначається даними |
| Кінець | визначається даними |
| Гранулярність | тижні (понеділок) |

---

## 4. ФАЗИ ОБРОБКИ

### Phase 1: Per-Market Processing

Для кожного ринку (CLIENT_ID) виконується DiD-аналіз:
- Агрегація даних
- Детекція stock-out
- DiD розрахунки
- Аналіз substitutes
- Генерація звітів та CSV

**Документація:** `docs/01_did_processing/`

### Phase 2: Cross-Market Aggregation

Агрегація результатів по всіх ринках:
- MARKET_COVERAGE
- WEIGHTED_AVG_SHARE_INTERNAL
- CI_95 (довірчі інтервали)
- CROSS_MARKET_CLASSIFICATION

**Документація:** `docs/02_substitution_coefficients/`

---

## 5. ДЖЕРЕЛО ПАРАМЕТРІВ

Технічні параметри аналізу (пороги, константи) визначені в:

| Тип параметрів | Розташування |
|----------------|--------------|
| Шляхи до даних | `project_core/data_config/paths_config.py` |
| Пороги та константи | `project_core/did_config/classification_thresholds.py` |
| NFC сумісність | `project_core/did_config/nfc_compatibility.py` |

---

## 6. ПРИМІТКИ

Цей файл містить загальний опис **поточної конфігурації** мульти-ринкового дослідження.

При зміні набору ринків:
1. Оновити файли в `data/raw/`
2. Перезапустити Phase 1 для всіх ринків
3. Перезапустити Phase 2 для агрегації
4. Оновити версію та дату документа
